{"changed":true,"filter":false,"title":"exporter.rb","tooltip":"/lib/dradis/plugins/csv/exporter.rb","value":"module Dradis::Plugins::JSON\n  class Exporter < Dradis::Plugins::Export::Base\n    def export(args={})\n      template        = args[:template]\n\n      issues = content_service.all_issues\n\n      if issues.empty?\n        return \"The project didn't contain any issues\"\n      else\n        keys = issues.first.fields.keys\n\n        # Create the CSV data\n        csv_string = ::CSV.generate do |csv|\n\n          # Add the header line with all the field names. Remember note.field returns\n          # a hash: {'Title' => 'Foo', 'Description' => 'Bar'}\n          csv << keys\n\n          # For each of the notes in our category, we dump the field values.\n          # This assumes all notes have the same fields, in the same order\n          issues.each do |issue|\n            csv << keys.map do |key|\n              issue.fields.fetch(key, 'n/a')\n            end\n          end\n        end\n\n        csv_string\n      end\n\n    end\n  end\nend\n","undoManager":{"mark":-2,"position":3,"stack":[[{"start":{"row":0,"column":24},"end":{"row":0,"column":27},"action":"remove","lines":["CSV"],"id":2},{"start":{"row":0,"column":24},"end":{"row":0,"column":25},"action":"insert","lines":["J"]}],[{"start":{"row":0,"column":25},"end":{"row":0,"column":26},"action":"insert","lines":["S"],"id":3}],[{"start":{"row":0,"column":26},"end":{"row":0,"column":27},"action":"insert","lines":["O"],"id":4}],[{"start":{"row":0,"column":27},"end":{"row":0,"column":28},"action":"insert","lines":["N"],"id":5}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":5,"column":13},"end":{"row":5,"column":13},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1458090267889}